
# 세미나 1 과제
### Due: 2022.10.03.(월) 23:59
- RDB 개념을 녹여내서, SpringBoot CRUD 어플리케이션을 만들어볼게요.
- 다음 세미나 마감 전까지, PR을 올려주세요.
  - PR에는 새로 생성한 API의 여러 시나리오를 Insomnia, Postman으로 확인한 결과를 캡처해 담아주세요.
  - 어디까지 (얼마나 자세히) 확인하고 공유할지는, 조 별로 **자율적으로** 정해주세요. 당연하지만 적극적으로 좋은 퀄리티를 위해 고민해주세요.
  - 이를 바탕으로 Peer Review를 진행할 수 있도록 합니다.
  - ❗️ 조원들에 대한 Peer Review는, 과제 마감 후 **이틀 내**에 완료해주세요! ❗️

---

### 유저 도메인 만들어보기
: 현재 우리 서버에는 유저 데이터가 없어요. 새로운 유저를 생성하고 관리할 수 있으면 좋을 것 같아요 :)

#### ☝🏻 유저 엔티티를 새로 선언해서, 관리할 수 있게 해주세요.

1. 유저는 이름, 이메일을 가지고 있고, 두 값은 null이거나 비어있을 수 없습니다.
2. 유저의 이메일은 중복된 값이 존재할 수 없습니다.
3. 유저는 survey 도메인과 종속적이지 않아요 !! 패키지를 분리해서 생성해주세요 :)

#### ☝🏻 새로운 유저를 생성할 수 있는, `POST /api/v1/user` API를 만들어주세요.

1. @RequestBody 어노테이션을 통해 요청을 처리해주세요.
2. 유저의 이메일이 중복될 경우, `409 Conflict`를 응답으로 내려주세요. 
   - HINT : ExceptionHandler의 힘을 빌려야 해요.
3. 유저의 비밀번호도 요청을 통해 받아볼거에요.
   - 유저 비밀번호가 DB에 그대로 저장되어도 괜찮을까요 !?
   - 비밀번호 암호화를 위해 PasswordEncoder Bean을 사용할 수 있어요. 이를 사용해서 암호화된 데이터를 저장해주세요.
   - [요청 DTO](src/main/kotlin/com/wafflestudio/seminar/user/api/request/CreateUserRequest.kt), [PasswordEncoder](src/main/kotlin/com/wafflestudio/seminar/config/AuthConfig.kt)를 참고해주세요.


#### ☝🏻 유저가 회원가입했으니, 로그인이 하고 싶어요. `POST /api/v1/login` API를 만들어주세요.

1. 지금은 제대로 로그인 기능을 만들진 않을거에요.
2. 요청으로 유저의 이메일, 비밀번호를 받으면, 유저 ID를 반환해주는 로그인 API를 만들어주세요.
3. 비밀번호가 저장된 것과 다르면, `401 UnAuthorized` 응답을 내보내주세요.
4. 앞으로 유저 식별 요청에서는, Header에 `X-User-ID`라는 커스텀 헤더를 받아서, 유저가 로그인한 상황을 가정해보도록 할게요.

#### ☝🏻 **유저가 자신의 정보를 확인할 수 있는, `GET /api/v1/user/me` API를 만들어주세요.**

1. 존재하지 않는 유저인 경우, `404 Bad Request` 응답을 내주세요.
2. ❗앞서 정의한 ️헤더가 존재하지 않는다면, 로그인한 유저를 식별할 수 없기 때문에, `403 Forbidden` 처리를 해주어야 해요.

#### ☝🏻 **이제 설문결과에 유저 정보를 담을 수 있어요.**

1. SurveyResponse 테이블에 `user_id` 칼럼을 추가하면 될 것 같아요.
2. 이미 존재하는 테이블들은 user 정보가 없어요. 따라서 user_id 칼럼은 nullable 해야 하겠죠?
3. 앞선 과제 0에서 제작했던, 설문결과를 보여주는 응답에서, 이제 유저 정보도 포함시켜주세요.
   - 단순히 user_id를 보여주는 것이 아니라, 유저의 정보를 nested json 형태로 담아서 보여주세요!

#### ☝🏻 **유저는 이제, `POST /api/v1/survey` API를 통해 설문조사에 참여할 수 있어요.**

0. 유저를 식별하는 과정은, 앞선 명세와 마찬가지로 헤더 값을 통해 로그인 상황을 식별하도록 할게요.
1. 아래 값들은, 요청에 꼭! 포함되어야 하고, 빈 값이면 안돼요. 만약 조건을 만족하지 않는다면 `400 BAD REQUEST` 응답을 내려주세요.
   - `spring_exp, rdb_exp, programming_exp, os`
2. `os`의 경우 요청에는 **운영체제의 이름**을 받아서, 이를 토대로 처리해주어야 해요.
   - 만약 서버에 존재하지 않는 운영체제인 경우, `404 NOT FOUND` 응답이 반환되어야 해요.
3. 이외에는 비교적 자유롭게 구현하셔도 돼요!

---
### 당부의 말씀

> 공식문서, 구글링을 두려워하지 마세요!

- 질문을 많이 해주세요 !!!
    - 이번 과제를 출제하면서, 명세에 의도적으로 불친절한 서술을 적어두었어요.
    - 다만 각 패키지의 README, 주석 등을 통해 힌트가 될만한 가이드를 제공하고자 했어요.
    - 그러니 애매하다, 궁금하다 싶으면 질문을 많이 해주세요 :)


- 또 분명 제가 다루지 않은 아주 다양한 포인트들이 있을거에요.
    - 이런것도 질문 환영입니다!

### 참고하면 좋은 레퍼런스

- [Validation 관련 문서](https://www.baeldung.com/spring-service-layer-validation)
- https://www.baeldung.com/

- https://docs.spring.io/spring-boot/docs/2.5.4/reference/pdf/spring-boot-reference.pdf

- 앞으로도 늘 그렇겠지만, 과제를 진행하며 모르는 것들과 여러 난관에 부딪히리라 생각됩니다. 당연히 그 지점을 기대하고 과제를 드리는 것이고, 기본적으로 스스로 구글링을
  통해 여러 내용을 확인하고 적절한 수준까지 익숙해지실 수 있도록 하면 좋겠습니다.

- 문제를 해결하기 위해 질문하는 경우라면, 질문을 통해 기대하는 바, (가급적 스크린샷 등을 포함한) 실제 문제 상황, 이를 해결하기 위해 시도해본 것, 예상해본 원인 등을 포함시켜 주시는 것이 자신과 질문을 답변하는 사람, 제3자 모두에게 좋습니다.

- 저는 직장을 다니고 있으므로 아주 빠른 답변은 어려울 수 있고, 특히 과제 마감 직전에 여러 질문이 올라오거나 하면 마감 전에 모든 답변을 드릴 수 있다는 것은
  보장하기 어렵다는 점 이해해주시면 좋겠습니다. 그리고 세미나 진행자들이 아니어도, 참여자 분들 모두가 자신이 아는 선에서 서로 답변을 하고 도우시려고 하면 아주 좋을 것 같습니다.

- 과제의 핵심적인 스펙은 바뀌지 않을 것이며 설령 있다면 공지를 따로 드릴 것입니다. 하지만 문구나 오타 수정 등의 변경은 수시로 있을 수 있고,
  특히 '참고하면 좋을 것들'에는 추가 자료들을 첨부할 수도 있습니다. 때문에 종종 이 repository를 pull 받아주시거나, 이 페이지를 GitHub에서 종종 다시 확인해주시기 바랍니다.